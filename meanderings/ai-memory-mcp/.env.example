# =============================================================================
# AI Memory MCP Server - Environment Configuration
# =============================================================================

# =============================================================================
# HTTP Server Configuration
# =============================================================================

# Port for HTTP server
MEMORY_HTTP_PORT=3003

# Host to bind to (0.0.0.0 for Docker, localhost for local dev)
MEMORY_HTTP_HOST=localhost

# CORS origins (comma-separated, use * for all)
MEMORY_CORS_ORIGINS=*

# =============================================================================
# Simple Bearer Token Authentication (Legacy)
# =============================================================================

# Enable simple bearer token authentication
# This works alongside OAuth as a fallback
MEMORY_AUTH_ENABLED=false

# Static bearer token for simple authentication
# WARNING: This is not recommended for production
MEMORY_AUTH_TOKEN=memory-research-key-12345

# =============================================================================
# OAuth 2.1 Authentication
# =============================================================================

# Enable OAuth 2.1 authentication
# Required for Anthropic Claude connector
MEMORY_OAUTH_ENABLED=false

# Resource identifier - canonical URL of this MCP server
# This MUST match the URL clients use to access this server
# Example with Tailscale: https://memory.your-tailscale-network.ts.net
# Example local dev: http://localhost:3003
MEMORY_RESOURCE_ID=http://localhost:3003

# Authorization servers trusted to issue tokens (comma-separated)
# These are the OAuth providers that can authenticate clients
# Examples:
#   - Logto: https://your-tenant.logto.app
#   - Auth0: https://your-tenant.auth0.com
#   - Self-hosted: https://auth.example.com
MEMORY_AUTH_SERVERS=

# Supported OAuth scopes (comma-separated)
# Default scopes for memory operations
MEMORY_OAUTH_SCOPES=read:memory,write:memory

# =============================================================================
# JWT Validation Settings
# =============================================================================

# Clock tolerance for token expiration (seconds)
# Allows for clock skew between servers
MEMORY_JWT_CLOCK_TOLERANCE=30

# JWKS cache TTL (seconds)
# How long to cache authorization server's public keys
# Longer = better performance, but slower key rotation
MEMORY_JWKS_CACHE_TTL=3600

# Validated token cache TTL (seconds)
# How long to cache validated tokens
# Should be shorter than typical token lifetime
MEMORY_TOKEN_CACHE_TTL=300

# =============================================================================
# Neo4j Configuration
# =============================================================================

NEO4J_URI=bolt://localhost:7687
NEO4J_USER=neo4j
NEO4J_PASSWORD=testpassword123
NEO4J_DATABASE=neo4j

# =============================================================================
# Automated Maintenance
# =============================================================================

# Enable automated consciousness maintenance tasks
MEMORY_MAINTENANCE_ENABLED=true

# Cron schedule for vector index refresh (default: every 6 hours)
MEMORY_MAINTENANCE_VECTOR_SCHEDULE=0 */6 * * *

# Cron schedule for duplicate detection (default: daily at 3 AM)
MEMORY_MAINTENANCE_DUPLICATE_SCHEDULE=0 3 * * *

# =============================================================================
# Development Settings
# =============================================================================

# Node environment
NODE_ENV=development

# Log level (error, warn, info, debug)
LOG_LEVEL=info
